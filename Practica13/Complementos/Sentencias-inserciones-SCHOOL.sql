CREATE TABLE STAFF(
  STAFF_ID NUMBER(8) CONSTRAINT STAFF_PK PRIMARY KEY,
  STAFF_ADRESS_ID NUMBER(8) CONSTRAINT STA_ADR_STA_NN NOT NULL,
  NICKNAME VARCHAR(50),
  FIRST_NAME VARCHAR(50),
  MIDDLE_NAME VARCHAR(50),
  LAST_NAME VARCHAR(50),
  DATE_OF_BIRTH DATE,
  DATE_JOINED_STAFF DATE,
  DATE_LEFT_STAFF DATE,
  OTHER_STAFF_DETALS VARCHAR(100),
  CONSTRAINT ADRE_ASTA_FK FOREIGN KEY (STAFF_ADRESS_ID) REFERENCES ADRESSES(ADRESS_ID)
);

INSERT INTO STAFF VALUES(1,1,'PEDRO','PEDRO',NULL,'PEREZ','15/05/1999','15/12/18',NULL,NULL);
INSERT INTO STAFF VALUES(2,2,'MARIANO','MARIO',NULL,'FERNANDEZ','15/05/1991','15/12/17',NULL,NULL);
INSERT INTO STAFF VALUES(3,3,'JOSE','JOSE',NULL,'NUÑEZ','15/05/1990','15/12/16',NULL,NULL);


CREATE TABLE ADRESSES(
  ADRESS_ID NUMBER(8) CONSTRAINT ADRESS_PK PRIMARY KEY,
  LINE_1_NUMBER_BUILDING NUMBER(4),
  LINE_2_NUMBER_STREET NUMBER(4),
  LINE_3_AREA_LOCATITY NUMBER(4),
  CITY VARCHAR(100),
  ZIP_POSTCODE NUMBER(5),
  STATE_PROVINCE_COUNTY VARCHAR(100),
  COUNTRY VARCHAR(100),
  OTHER_ADRESS_DETAILS VARCHAR(150)
);

INSERT INTO ADRESSES VALUES(1,1,1,1,'ZAC',1234,'CENTRO','MX',NULL);
INSERT INTO ADRESSES VALUES(2,2,2,2,'JEREZ',4321,'ALAMEDA','MX',NULL);
INSERT INTO ADRESSES VALUES(3,3,3,3,'VALPA',4653,'ZARAGOZA','MX',NULL);

INSERT INTO ADRESSES VALUES(4,4,4,4,'GUAD',2548,'ALAMEDA','MX',NULL);
INSERT INTO ADRESSES VALUES(5,5,5,5,'HUEJ',3643,'ZARAGOZA','MX',NULL);


CREATE TABLE REF_CUSTOMER_STATUS(
  CUSTOMER_STATUS_CODE NUMBER(8) CONSTRAINT R_C_S_PK PRIMARY KEY,
  CUSTOMER_STATUS_DESCRIPTION VARCHAR(100),
  EG_GOOD_BAD  VARCHAR(50)
);

INSERT INTO REF_CUSTOMER_STATUS VALUES(1,'CUSTOMER 1',NULL);
INSERT INTO REF_CUSTOMER_STATUS VALUES(2,'CUSTOMER 2',NULL);
INSERT INTO REF_CUSTOMER_STATUS VALUES(3,'CUSTOMER 3',NULL);

CREATE TABLE CUSTOMERS(
  CUSTOMER_ID NUMBER(8) CONSTRAINT CUSTOMERS_PK PRIMARY KEY,
  CUSTOMER_ADRESS_ID NUMBER(8) CONSTRAINT CUS_AD_CUS_NN NOT NULL,
  CUSTOMER_STATUS_CODE NUMBER(8) CONSTRAINT CUS_ST_CO_CUS_NN NOT NULL,
  DATE_BECAME_CUSTOMER DATE,
  DATE_OF_BIRTH DATE,
  FIRST_NAME VARCHAR(50),
  LAST_NAME VARCHAR(50),
  AMOUNT_OUTSTANDING NUMBER(6),
  EMAIL_ADRESS VARCHAR(150),
  PHONE_NUMBER VARCHAR(20),
  CELL_MOBILE_PHONE_NUMBER VARCHAR(20),
  OTHER_CUSTOMER_DETAILS VARCHAR(150),
  CONSTRAINT ADRE_CUS_FK FOREIGN KEY (CUSTOMER_ADRESS_ID) REFERENCES ADRESSES(ADRESS_ID),
  CONSTRAINT CUS_STA_CO_CUS_FK FOREIGN KEY (CUSTOMER_STATUS_CODE) REFERENCES REF_CUSTOMER_STATUS(CUSTOMER_STATUS_CODE)
);

INSERT INTO CUSTOMERS VALUES(1,4,1,'11/12/13','11/12/90','MARIA','FELIX',NULL,'MARIA@GMAIL.COM','2754637453','6384629483',NULL);
INSERT INTO CUSTOMERS VALUES(2,5,2,'11/12/12','11/12/95','FERNANDO','BARRIOS',NULL,'FERNANDO@GMAIL.COM','2352636453','7388621583',NULL);


CREATE TABLE REF_PAYMENT_METHODS(
  PAYMENT_METHODS_CODE NUMBER(4) CONSTRAINT REF_PAYMENT_MET_PK PRIMARY KEY,
  PAYMENT_METHODS_DESCRIPTION VARCHAR(100)
);

INSERT INTO REF_PAYMENT_METHODS VALUES(1,'CASH');
INSERT INTO REF_PAYMENT_METHODS VALUES(2,'AMEX');
INSERT INTO REF_PAYMENT_METHODS VALUES(3,'CC');

CREATE TABLE CUSTOMER_PAYMENTS(
  CUSTOMER_ID NUMBER(8),
  DATETIME_PAYMENT DATE,
  PAYMENT_METHOD_CODE NUMBER(4) CONSTRAINT CUS_PAY_NN NOT NULL,
  AMOUNT_PAYMENT NUMBER(7,2),
  OTHER_PAYMENT_DETAILS VARCHAR(100),
  CONSTRAINT CUSTOMER_PAYMENTS_PK PRIMARY KEY (CUSTOMER_ID,DATETIME_PAYMENT),
  CONSTRAINT CUS_CUS_PAY_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(CUSTOMER_ID),
  CONSTRAINT PAY_MET_CUS_PAY_FK FOREIGN KEY (PAYMENT_METHOD_CODE) REFERENCES REF_PAYMENT_METHODS(PAYMENT_METHODS_CODE)
);

INSERT INTO CUSTOMER_PAYMENTS VALUES(1,'14/05/20',1,123.23,NULL);
INSERT INTO CUSTOMER_PAYMENTS VALUES(2,'15/05/20',2,124.50,NULL);

CREATE TABLE VEHICLES(
  VEHICLE_ID NUMBER(5) CONSTRAINT VEHICLE_PK PRIMARY KEY,
  VEHICLE_DETAILS VARCHAR(150)
);

INSERT INTO VEHICLES VALUES(1,'VEHICLE 1');
INSERT INTO VEHICLES VALUES(2,'VEHICLE 2');
INSERT INTO VEHICLES VALUES(3,'VEHICLE 3');

CREATE TABLE REF_LESSON_STATUS(
  LESSON_STATUS_CODE NUMBER(5) CONSTRAINT REF_LESS_STA_PK PRIMARY KEY,
  LESSON_STATUS_DESCRIPTION VARCHAR(50)
);

INSERT INTO REF_LESSON_STATUS VALUES(1,'CANCELLED');
INSERT INTO REF_LESSON_STATUS VALUES(2,'COMPLETED');

CREATE TABLE LESSONS(
  LESSON_ID NUMBER(8) CONSTRAINT LESSON_PK PRIMARY KEY,
  CUSTOMER_ID NUMBER(8),
  LESSON_STATUS_CODE NUMBER(5),
  STAFF_ID NUMBER(8),
  VEHICLE_ID NUMBER(5),
  LESSON_DATE DATE,
  PRICE NUMBER(7,2),
  OTHER_LESSON_DETAILS VARCHAR(100),
  CONSTRAINT CUS_LESS_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(CUSTOMER_ID),
  CONSTRAINT REF_LESS_ST_LESS_FK FOREIGN KEY (LESSON_STATUS_CODE) REFERENCES REF_LESSON_STATUS(LESSON_STATUS_CODE),
  CONSTRAINT STAFF_LESS_FK FOREIGN KEY (STAFF_ID) REFERENCES STAFF(STAFF_ID),
  CONSTRAINT VEH_LESS_FK FOREIGN KEY (VEHICLE_ID) REFERENCES VEHICLES(VEHICLE_ID)
);

INSERT INTO LESSONS VALUES(1,1,1,1,1,'15/01/14',555.50,NULL);
INSERT INTO LESSONS VALUES(2,2,2,2,2,'11/12/14',555.50,NULL);
INSERT INTO LESSONS VALUES(3,2,2,2,2,'11/12/14',555.50,NULL);

commit;

